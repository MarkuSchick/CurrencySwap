%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[a4paper,11pt,english]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{times}
\expandafter\ifx\csname T@LGR\endcsname\relax
\else
% LGR was declared as font encoding
  \substitutefont{LGR}{\rmdefault}{cmr}
  \substitutefont{LGR}{\sfdefault}{cmss}
  \substitutefont{LGR}{\ttdefault}{cmtt}
\fi
\expandafter\ifx\csname T@X2\endcsname\relax
  \expandafter\ifx\csname T@T2A\endcsname\relax
  \else
  % T2A was declared as font encoding
    \substitutefont{T2A}{\rmdefault}{cmr}
    \substitutefont{T2A}{\sfdefault}{cmss}
    \substitutefont{T2A}{\ttdefault}{cmtt}
  \fi
\else
% X2 was declared as font encoding
  \substitutefont{X2}{\rmdefault}{cmr}
  \substitutefont{X2}{\sfdefault}{cmss}
  \substitutefont{X2}{\ttdefault}{cmtt}
\fi


\usepackage[Bjarne]{fncychap}
\usepackage{sphinx}

\fvset{fontsize=\small}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}


\usepackage{sphinxmessages}
\setcounter{tocdepth}{2}



\title{Documentation of the Currency Swap project}
\date{07 March 2021}
\release{}
\author{Markus Schick}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{}
\makeindex
\begin{document}

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}



\chapter{Introduction}
\label{\detokenize{introduction:introduction}}\label{\detokenize{introduction:id1}}\label{\detokenize{introduction::doc}}
\sphinxAtStartPar
The Project analyses the historical EURO/USD exchange rate to find parameters for a potential Currency Swap living on a blockchain.

\sphinxAtStartPar
We try various asset allocations and leverage factors to find a optimal design for such contract.
Competing designs can be easily added to the contracts folder and we can perform analyses for them.
Graphs are produced to visualize the relationship between historical EURO/USD volatility, contract parameterization
and (realized) payout. For this we take an backward perspective and simulated returns based on historical data of the EURO / USD exchange rate (1999\sphinxhyphen{}Today).

\sphinxAtStartPar
The aim is not to find a prediction of future of exchange rate movements, but show how the swap contract
would have payed out in the past.
The aim is to find the highest leverage factor available possible to pay out with a limited amount of collateral.
Background: Since financial claims can not be \sphinxstyleemphasis{enforced} on a blockchain we need to have hold collateral to full fill these claims.

\sphinxAtStartPar
They are exported to a short presentation and research paper.


\section{The project’s workflow}
\label{\detokenize{introduction:the-projects-workflow}}\label{\detokenize{introduction:getting-started}}
\sphinxAtStartPar
The project follows the following steps:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Download data

\item {} 
\sphinxAtStartPar
Simulate 1\sphinxhyphen{}Year EURO/USD returns

\item {} 
\sphinxAtStartPar
Simulate payouts given Swap contract configurations

\item {} 
\sphinxAtStartPar
Research paper and presentations

\end{enumerate}

\sphinxAtStartPar
Graphs are created along the way.


\chapter{Data download}
\label{\detokenize{download_data:data-download}}\label{\detokenize{download_data:download-data}}\label{\detokenize{download_data::doc}}
\sphinxAtStartPar
Documentation of the code in \sphinxstyleemphasis{src/download\_data}.


\section{Download EURO/USD exchange rate data}
\label{\detokenize{download_data:download-euro-usd-exchange-rate-data}}\phantomsection\label{\detokenize{download_data:module-src.download_data.task_get_exchange_rate_data}}\index{module@\spxentry{module}!src.download\_data.task\_get\_exchange\_rate\_data@\spxentry{src.download\_data.task\_get\_exchange\_rate\_data}}\index{src.download\_data.task\_get\_exchange\_rate\_data@\spxentry{src.download\_data.task\_get\_exchange\_rate\_data}!module@\spxentry{module}}
\sphinxAtStartPar
Downloads the daily EURO/USD exchange rate from
FRED and saves output as a pickle.
url: \sphinxurl{https://fred.stlouisfed.org/series/DEXUSEU}


\section{Descriptive analysis of the Time series}
\label{\detokenize{download_data:descriptive-analysis-of-the-time-series}}\phantomsection\label{\detokenize{download_data:module-src.download_data.task_descriptive_analysis}}\index{module@\spxentry{module}!src.download\_data.task\_descriptive\_analysis@\spxentry{src.download\_data.task\_descriptive\_analysis}}\index{src.download\_data.task\_descriptive\_analysis@\spxentry{src.download\_data.task\_descriptive\_analysis}!module@\spxentry{module}}\index{plot\_historical\_timeseries() (in module src.download\_data.task\_descriptive\_analysis)@\spxentry{plot\_historical\_timeseries()}\spxextra{in module src.download\_data.task\_descriptive\_analysis}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{download_data:src.download_data.task_descriptive_analysis.plot_historical_timeseries}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{plot\_historical\_timeseries}}}{\emph{\DUrole{n}{euro\_usd\_pd}}, \emph{\DUrole{n}{path}}}{}
\sphinxAtStartPar
Plot the historical EURO / USD exchange rate and percentage returns
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{euro\_usd\_pd}} (\sphinxstyleliteralemphasis{\sphinxupquote{pd.DataFrame}}) \textendash{} daily EURO / USD data (must include price,
pct\_change and date as index).

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{path}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} path to output graph.

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\phantomsection\label{\detokenize{simulation:simulation}}

\chapter{Simulation of EURO/USD exchange rate over 1 year horizon}
\label{\detokenize{simulation:simulation-of-euro-usd-exchange-rate-over-1-year-horizon}}\label{\detokenize{simulation::doc}}
\sphinxAtStartPar
Documentation of the code in \sphinxstyleemphasis{src.simulation}.


\section{Simulates 1 year returns with two methods}
\label{\detokenize{simulation:simulates-1-year-returns-with-two-methods}}\phantomsection\label{\detokenize{simulation:module-src.simulation.task_simulate_sample}}\index{module@\spxentry{module}!src.simulation.task\_simulate\_sample@\spxentry{src.simulation.task\_simulate\_sample}}\index{src.simulation.task\_simulate\_sample@\spxentry{src.simulation.task\_simulate\_sample}!module@\spxentry{module}}
\sphinxAtStartPar
Generates simulated EURO / USD returns for a period
specified in simulate\_config.json.
Saves simulated samples as pickle.

\sphinxAtStartPar
Implemented methods:|
\# historical (based on historical 1 year returns) |
\# bootstrapped (stationary bootstrapped returns from historical sample) |

\sphinxAtStartPar
Bootstrapping is done with the recombinator package.
See: \sphinxurl{https://github.com/InvestmentSystems/recombinator}

\sphinxAtStartPar
Further simulation function can be parsed as arguments to the iterator object
specifications.
\index{generate\_bootstrapped\_returns() (in module src.simulation.task\_simulate\_sample)@\spxentry{generate\_bootstrapped\_returns()}\spxextra{in module src.simulation.task\_simulate\_sample}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{simulation:src.simulation.task_simulate_sample.generate_bootstrapped_returns}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{generate\_bootstrapped\_returns}}}{\emph{\DUrole{n}{data}}, \emph{\DUrole{n}{config}}}{}
\sphinxAtStartPar
Uses the stationary bootstrapp method
to generate bootsstrap\_sim\_num many vectors
of 1 year length (==trading days). Optimal (average)
block length is computed in program
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{data}} (\sphinxstyleliteralemphasis{\sphinxupquote{np.array}}\sphinxstyleliteralemphasis{\sphinxupquote{(}}\sphinxstyleliteralemphasis{\sphinxupquote{N}}\sphinxstyleliteralemphasis{\sphinxupquote{,}}\sphinxstyleliteralemphasis{\sphinxupquote{1}}\sphinxstyleliteralemphasis{\sphinxupquote{)}}) \textendash{} Timeseries of logarithmic EURO/USD returns.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{config}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} dictionary of simulation parameters.

\end{itemize}

\item[{Returns}] \leavevmode
\sphinxAtStartPar
Array of bootstrapped 1 year returns

\item[{Return type}] \leavevmode
\sphinxAtStartPar
np.array(trading\_days, bootsstrap\_sim\_num)

\end{description}\end{quote}

\end{fulllineitems}

\index{generate\_historical\_returns() (in module src.simulation.task\_simulate\_sample)@\spxentry{generate\_historical\_returns()}\spxextra{in module src.simulation.task\_simulate\_sample}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{simulation:src.simulation.task_simulate_sample.generate_historical_returns}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{generate\_historical\_returns}}}{\emph{\DUrole{n}{data}}, \emph{\DUrole{n}{config}}}{}
\sphinxAtStartPar
Stack vectors of (all) historical periods starting
from the introduction of the EURO in 1999 of length
of 1 year next to each other
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{data}} (\sphinxstyleliteralemphasis{\sphinxupquote{np.array}}\sphinxstyleliteralemphasis{\sphinxupquote{(}}\sphinxstyleliteralemphasis{\sphinxupquote{N}}\sphinxstyleliteralemphasis{\sphinxupquote{,}}\sphinxstyleliteralemphasis{\sphinxupquote{1}}\sphinxstyleliteralemphasis{\sphinxupquote{)}}) \textendash{} Timeseries of logarithmic EURO/USD returns.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{config}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} dictionary of simulation parameters.

\end{itemize}

\item[{Returns}] \leavevmode
\sphinxAtStartPar
DataFrame of K historical series of
1 year returns of length trading days.

\item[{Return type}] \leavevmode
\sphinxAtStartPar
pd.DataFrame(trading\_days, K)

\end{description}\end{quote}

\end{fulllineitems}



\section{Plots the distribution of 1\sphinxhyphen{}year EUR/USD returns of both methods}
\label{\detokenize{simulation:plots-the-distribution-of-1-year-eur-usd-returns-of-both-methods}}\phantomsection\label{\detokenize{simulation:module-src.simulation.task_exchange_rate_change}}\index{module@\spxentry{module}!src.simulation.task\_exchange\_rate\_change@\spxentry{src.simulation.task\_exchange\_rate\_change}}\index{src.simulation.task\_exchange\_rate\_change@\spxentry{src.simulation.task\_exchange\_rate\_change}!module@\spxentry{module}}
\sphinxAtStartPar
Plot the distribution of 1\sphinxhyphen{}Year EURO/USD returns
\index{plot\_total\_change() (in module src.simulation.task\_exchange\_rate\_change)@\spxentry{plot\_total\_change()}\spxextra{in module src.simulation.task\_exchange\_rate\_change}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{simulation:src.simulation.task_exchange_rate_change.plot_total_change}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{plot\_total\_change}}}{\emph{\DUrole{n}{data}}, \emph{\DUrole{n}{path}}}{}
\sphinxAtStartPar
Plot the final exchange rate resulting from 1 year exchange rate
returns
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{data}} (\sphinxstyleliteralemphasis{\sphinxupquote{pd.DataFrame}}) \textendash{} Pandas DataFrame cumulated exchange rate movements.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{path}} (\sphinxstyleliteralemphasis{\sphinxupquote{string}}) \textendash{} path of output file.

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\phantomsection\label{\detokenize{contract_specs:contract-specs}}

\chapter{Swap Contract/Simulation configurations}
\label{\detokenize{contract_specs:swap-contract-simulation-configurations}}\label{\detokenize{contract_specs::doc}}
\sphinxAtStartPar
The directory \sphinxstyleemphasis{src.model\_specs} contains \sphinxhref{http://www.json.org/}{JSON} files with model specifications.

\sphinxAtStartPar
There are 3 json files in the directory. 
Macroeconomic conditions are specified in \sphinxstyleemphasis{scenario\_config}. 
Simulation parameters are specified in \sphinxstyleemphasis{simulation\_config}. 
Parameters of the swap contract are specified in \sphinxstyleemphasis{swap\_config}. 


\chapter{Financial contracts}
\label{\detokenize{financial_contracts:financial-contracts}}\label{\detokenize{financial_contracts:id1}}\label{\detokenize{financial_contracts::doc}}
\sphinxAtStartPar
The directory \sphinxstyleemphasis{src.financial\_contracts} contains the payout logic of the swap contract


\section{The Swap contract}
\label{\detokenize{financial_contracts:module-src.financial_contracts.swap_contract}}\label{\detokenize{financial_contracts:the-swap-contract}}\index{module@\spxentry{module}!src.financial\_contracts.swap\_contract@\spxentry{src.financial\_contracts.swap\_contract}}\index{src.financial\_contracts.swap\_contract@\spxentry{src.financial\_contracts.swap\_contract}!module@\spxentry{module}}\index{payout\_currency\_swap() (in module src.financial\_contracts.swap\_contract)@\spxentry{payout\_currency\_swap()}\spxextra{in module src.financial\_contracts.swap\_contract}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{financial_contracts:src.financial_contracts.swap_contract.payout_currency_swap}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{payout\_currency\_swap}}}{\emph{\DUrole{n}{final\_exchange\_rate}}, \emph{\DUrole{n}{start\_exchange\_rate}}, \emph{\DUrole{n}{USD\_asset\_allocation}}, \emph{\DUrole{n}{leverage}}, \emph{\DUrole{n}{return\_on\_euro\_deposits}}, \emph{\DUrole{n}{return\_on\_usd\_deposits}}}{}
\sphinxAtStartPar
Simulates payoff profile of some currency swap contract.
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{final\_exchange\_rate}} (\sphinxstyleliteralemphasis{\sphinxupquote{pd.Series}}) \textendash{} Final EURO/USD exchange rate.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{start\_exchange\_rate}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} Initial EURO/USD exchange rate.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{USD\_asset\_allocation}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} Share of assets invested in USD. Must be between 0 and 1.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{leverage}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} Leverage factor of the currency swap. Must be larger than 1.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{return\_on\_euro\_deposits}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} Return on euro deposits.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{return\_on\_usd\_deposits}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} Return on usd deposits.

\end{itemize}

\item[{Returns}] \leavevmode
\sphinxAtStartPar
Payout of EURlong / EURshort certificate

\item[{Return type}] \leavevmode
\sphinxAtStartPar
EURpayout (pd.DataFrame)

\end{description}\end{quote}

\end{fulllineitems}



\section{The tests for the Swap contract}
\label{\detokenize{financial_contracts:module-src.financial_contracts.test_swap_contract}}\label{\detokenize{financial_contracts:the-tests-for-the-swap-contract}}\index{module@\spxentry{module}!src.financial\_contracts.test\_swap\_contract@\spxentry{src.financial\_contracts.test\_swap\_contract}}\index{src.financial\_contracts.test\_swap\_contract@\spxentry{src.financial\_contracts.test\_swap\_contract}!module@\spxentry{module}}
\sphinxAtStartPar
Testing the payout of the Currency Swap.
We test along 2 dimensions: |
1) exchange rate changes |
2) asset allocations |


\chapter{Simulation analysis}
\label{\detokenize{simulation_analysis:simulation-analysis}}\label{\detokenize{simulation_analysis:id1}}\label{\detokenize{simulation_analysis::doc}}
\sphinxAtStartPar
The directory \sphinxstyleemphasis{src.simulation\_analysis} contains the payout given simulated EURO/USD returns. This is the core of the project


\section{Computes the payout of the swap}
\label{\detokenize{simulation_analysis:module-src.simulation_analysis.task_swap_payout}}\label{\detokenize{simulation_analysis:computes-the-payout-of-the-swap}}\index{module@\spxentry{module}!src.simulation\_analysis.task\_swap\_payout@\spxentry{src.simulation\_analysis.task\_swap\_payout}}\index{src.simulation\_analysis.task\_swap\_payout@\spxentry{src.simulation\_analysis.task\_swap\_payout}!module@\spxentry{module}}\index{calc\_final\_payout() (in module src.simulation\_analysis.task\_swap\_payout)@\spxentry{calc\_final\_payout()}\spxextra{in module src.simulation\_analysis.task\_swap\_payout}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{simulation_analysis:src.simulation_analysis.task_swap_payout.calc_final_payout}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{calc\_final\_payout}}}{\emph{\DUrole{n}{cumulative\_forex\_change}}, \emph{\DUrole{n}{leverage}}, \emph{\DUrole{n}{USD\_asset\_allocation}}, \emph{\DUrole{n}{scenario\_config}}}{}
\sphinxAtStartPar
Calculate the finale payout of the currency swap contract given macroeconomic conditions
and configurations
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{cumulative\_forex\_change}} (\sphinxstyleliteralemphasis{\sphinxupquote{pd.Series}}) \textendash{} cumulative EUR/USD exchange rate change over 1

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{year.}} \textendash{} 

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{leverage}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} Leverage factor of the currency swap. Must be larger than 1.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{USD\_asset\_allocation}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} Share of assets invested in USD. Must be between 0 and 1.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{scenario\_config}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} assumed macroeconomic conditions.

\end{itemize}

\item[{Returns}] \leavevmode
\sphinxAtStartPar
Payout of swap contract (in EURO \& USD).

\item[{Return type}] \leavevmode
\sphinxAtStartPar
(pd.DataFrame)

\end{description}\end{quote}

\end{fulllineitems}

\index{filename\_to\_metadata() (in module src.simulation\_analysis.task\_swap\_payout)@\spxentry{filename\_to\_metadata()}\spxextra{in module src.simulation\_analysis.task\_swap\_payout}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{simulation_analysis:src.simulation_analysis.task_swap_payout.filename_to_metadata}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{filename\_to\_metadata}}}{\emph{\DUrole{n}{run\_id}}, \emph{\DUrole{n}{leverage}}, \emph{\DUrole{n}{USD\_asset\_allocation}}}{}
\sphinxAtStartPar
Write information about simulation configurations to a pd.DataFrame
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{run\_id}} (\sphinxstyleliteralemphasis{\sphinxupquote{id}}) \textendash{} Id of simulation configuration.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{leverage}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} Leverage factor of the currency swap

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{USD\_asset\_allocation}} (\sphinxstyleliteralemphasis{\sphinxupquote{float}}) \textendash{} Share of assets invested in USD. Must be between 0 and 1.

\end{itemize}

\item[{Returns}] \leavevmode
\sphinxAtStartPar
background information of the simulation run.

\item[{Return type}] \leavevmode
\sphinxAtStartPar
(pd.DataFrame)

\end{description}\end{quote}

\end{fulllineitems}



\section{Utility functions}
\label{\detokenize{simulation_analysis:module-src.simulation_analysis.utility}}\label{\detokenize{simulation_analysis:utility-functions}}\index{module@\spxentry{module}!src.simulation\_analysis.utility@\spxentry{src.simulation\_analysis.utility}}\index{src.simulation\_analysis.utility@\spxentry{src.simulation\_analysis.utility}!module@\spxentry{module}}
\sphinxAtStartPar
includes utility functions
used in the analysis task\_swap\_payout.py/task\_swap\_payout\_analysis.py
\index{extract\_simulation\_name() (in module src.simulation\_analysis.utility)@\spxentry{extract\_simulation\_name()}\spxextra{in module src.simulation\_analysis.utility}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{simulation_analysis:src.simulation_analysis.utility.extract_simulation_name}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{extract\_simulation\_name}}}{\emph{\DUrole{n}{data\_path}}}{}~\begin{description}
\item[{expected path is from type /filename\_with\_underscore\_SimulationName}] \leavevmode
\sphinxAtStartPar
returns SimulationName

\end{description}
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{data\_path}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} Windows path of file

\item[{Returns}] \leavevmode
\sphinxAtStartPar
name of simulation

\item[{Return type}] \leavevmode
\sphinxAtStartPar
{[}str{]}

\end{description}\end{quote}

\end{fulllineitems}

\index{generate\_missing\_directories() (in module src.simulation\_analysis.utility)@\spxentry{generate\_missing\_directories()}\spxextra{in module src.simulation\_analysis.utility}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{simulation_analysis:src.simulation_analysis.utility.generate_missing_directories}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{generate\_missing\_directories}}}{\emph{\DUrole{n}{out\_paths}}}{}
\sphinxAtStartPar
Generate directories if they do not exist
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{out\_paths}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} \{‘filename’: ‘outpath’\}

\end{description}\end{quote}

\end{fulllineitems}

\index{merge\_many\_to\_one\_metadata() (in module src.simulation\_analysis.utility)@\spxentry{merge\_many\_to\_one\_metadata()}\spxextra{in module src.simulation\_analysis.utility}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{simulation_analysis:src.simulation_analysis.utility.merge_many_to_one_metadata}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{merge\_many\_to\_one\_metadata}}}{\emph{\DUrole{n}{not\_aggregated\_data}}, \emph{\DUrole{n}{metadata}}}{}
\sphinxAtStartPar
m : 1 merge. Raises error if rows are only identified
in one dataset

\end{fulllineitems}

\index{merge\_one\_to\_one\_metadata() (in module src.simulation\_analysis.utility)@\spxentry{merge\_one\_to\_one\_metadata()}\spxextra{in module src.simulation\_analysis.utility}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{simulation_analysis:src.simulation_analysis.utility.merge_one_to_one_metadata}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{merge\_one\_to\_one\_metadata}}}{\emph{\DUrole{n}{aggregated\_data}}, \emph{\DUrole{n}{metadata}}}{}
\sphinxAtStartPar
1 : 1 merge. Raises error if rows are only identified
in one dataset

\end{fulllineitems}



\section{Plots the payout of the swap given various parameters}
\label{\detokenize{simulation_analysis:plots-the-payout-of-the-swap-given-various-parameters}}\phantomsection\label{\detokenize{simulation_analysis:module-src.simulation_analysis.task_swap_payout_analysis}}\index{module@\spxentry{module}!src.simulation\_analysis.task\_swap\_payout\_analysis@\spxentry{src.simulation\_analysis.task\_swap\_payout\_analysis}}\index{src.simulation\_analysis.task\_swap\_payout\_analysis@\spxentry{src.simulation\_analysis.task\_swap\_payout\_analysis}!module@\spxentry{module}}
\sphinxAtStartPar
Generate graphs to show how the
payout of the swap contract changes
depending on

\sphinxAtStartPar
Data from both implemented methods is used:|
\# historical (based on historical 1 year returns) |
\# bootstrapped (stationary bootstrapped returns from historical sample) |

\sphinxAtStartPar
Bootstrapping is done with the recombinator package.
See: \sphinxurl{https://github.com/InvestmentSystems/recombinator}

\sphinxAtStartPar
Further simulation function can be parsed as arguments to the iterator object
specifications.
\index{plot\_eurlong\_payout() (in module src.simulation\_analysis.task\_swap\_payout\_analysis)@\spxentry{plot\_eurlong\_payout()}\spxextra{in module src.simulation\_analysis.task\_swap\_payout\_analysis}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{simulation_analysis:src.simulation_analysis.task_swap_payout_analysis.plot_eurlong_payout}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{plot\_eurlong\_payout}}}{\emph{\DUrole{n}{payout\_data}}, \emph{\DUrole{n}{payout\_metadata}}, \emph{\DUrole{n}{figure\_path}}, \emph{\DUrole{n}{simulation\_name}}}{}
\sphinxAtStartPar
Plot the expected payout of the EURlong certificate
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{payout\_data}} (\sphinxstyleliteralemphasis{\sphinxupquote{pd.DataFrame}}) \textendash{} dataset with payout data

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{payout\_metadata}} (\sphinxstyleliteralemphasis{\sphinxupquote{pd.DataFrame}}) \textendash{} dataset with metainformation about run

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{(}}\sphinxstyleliteralstrong{\sphinxupquote{leverage}} \textendash{} 

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{allocation}}\sphinxstyleliteralstrong{\sphinxupquote{)}} (\sphinxstyleliteralemphasis{\sphinxupquote{asset}}) \textendash{} 

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{figure\_path}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} output path

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{simulation\_name}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} Type of simulation (bootstrapp or historical)

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{plot\_eurshort\_payout() (in module src.simulation\_analysis.task\_swap\_payout\_analysis)@\spxentry{plot\_eurshort\_payout()}\spxextra{in module src.simulation\_analysis.task\_swap\_payout\_analysis}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{simulation_analysis:src.simulation_analysis.task_swap_payout_analysis.plot_eurshort_payout}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{plot\_eurshort\_payout}}}{\emph{\DUrole{n}{payout\_data}}, \emph{\DUrole{n}{payout\_metadata}}, \emph{\DUrole{n}{figure\_path}}, \emph{\DUrole{n}{simulation\_name}}}{}
\sphinxAtStartPar
Plot the expected payout of the EURshort certificate
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{payout\_data}} (\sphinxstyleliteralemphasis{\sphinxupquote{pd.DataFrame}}) \textendash{} dataset with payout data

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{payout\_metadata}} (\sphinxstyleliteralemphasis{\sphinxupquote{pd.DataFrame}}) \textendash{} dataset with metainformation about run

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{(}}\sphinxstyleliteralstrong{\sphinxupquote{leverage}} \textendash{} 

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{allocation}}\sphinxstyleliteralstrong{\sphinxupquote{)}} (\sphinxstyleliteralemphasis{\sphinxupquote{asset}}) \textendash{} 

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{figure\_path}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} output path

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{simulation\_name}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} Type of simulation (bootstrapp or historical)

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{plot\_expected\_payout\_EUR() (in module src.simulation\_analysis.task\_swap\_payout\_analysis)@\spxentry{plot\_expected\_payout\_EUR()}\spxextra{in module src.simulation\_analysis.task\_swap\_payout\_analysis}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{simulation_analysis:src.simulation_analysis.task_swap_payout_analysis.plot_expected_payout_EUR}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{plot\_expected\_payout\_EUR}}}{\emph{\DUrole{n}{payout\_data}}, \emph{\DUrole{n}{payout\_metadata}}, \emph{\DUrole{n}{figure\_path}}, \emph{\DUrole{n}{simulation\_name}}}{}
\sphinxAtStartPar
Plot total (EURlong + EURshort) expected payout in EURO
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{payout\_data}} (\sphinxstyleliteralemphasis{\sphinxupquote{pd.DataFrame}}) \textendash{} dataset with payout data

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{payout\_metadata}} (\sphinxstyleliteralemphasis{\sphinxupquote{pd.DataFrame}}) \textendash{} dataset with metainformation about run

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{(}}\sphinxstyleliteralstrong{\sphinxupquote{leverage}} \textendash{} 

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{allocation}}\sphinxstyleliteralstrong{\sphinxupquote{)}} (\sphinxstyleliteralemphasis{\sphinxupquote{asset}}) \textendash{} 

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{figure\_path}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} output path

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{simulation\_name}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} Type of simulation (bootstrapp or historical)

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{plot\_expected\_payout\_USD() (in module src.simulation\_analysis.task\_swap\_payout\_analysis)@\spxentry{plot\_expected\_payout\_USD()}\spxextra{in module src.simulation\_analysis.task\_swap\_payout\_analysis}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{simulation_analysis:src.simulation_analysis.task_swap_payout_analysis.plot_expected_payout_USD}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{plot\_expected\_payout\_USD}}}{\emph{\DUrole{n}{payout\_data}}, \emph{\DUrole{n}{payout\_metadata}}, \emph{\DUrole{n}{figure\_path}}, \emph{\DUrole{n}{simulation\_name}}}{}
\sphinxAtStartPar
Plot total (EURlong + EURshort) expected payout in USD
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{payout\_data}} (\sphinxstyleliteralemphasis{\sphinxupquote{pd.DataFrame}}) \textendash{} dataset with payout data

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{payout\_metadata}} (\sphinxstyleliteralemphasis{\sphinxupquote{pd.DataFrame}}) \textendash{} dataset with metainformation about run

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{(}}\sphinxstyleliteralstrong{\sphinxupquote{leverage}} \textendash{} 

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{allocation}}\sphinxstyleliteralstrong{\sphinxupquote{)}} (\sphinxstyleliteralemphasis{\sphinxupquote{asset}}) \textendash{} 

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{figure\_path}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} output path

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{simulation\_name}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} Type of simulation (bootstrapp or historical)

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{plot\_negative\_payout() (in module src.simulation\_analysis.task\_swap\_payout\_analysis)@\spxentry{plot\_negative\_payout()}\spxextra{in module src.simulation\_analysis.task\_swap\_payout\_analysis}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{simulation_analysis:src.simulation_analysis.task_swap_payout_analysis.plot_negative_payout}}\pysiglinewithargsret{\sphinxbfcode{\sphinxupquote{plot\_negative\_payout}}}{\emph{\DUrole{n}{payout\_data}}, \emph{\DUrole{n}{payout\_metadata}}, \emph{\DUrole{n}{figure\_path}}, \emph{\DUrole{n}{simulation\_name}}}{}
\sphinxAtStartPar
Plot share of runs with negative payout
\begin{quote}\begin{description}
\item[{Parameters}] \leavevmode\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{payout\_data}} (\sphinxstyleliteralemphasis{\sphinxupquote{pd.DataFrame}}) \textendash{} dataset with payout data

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{payout\_metadata}} (\sphinxstyleliteralemphasis{\sphinxupquote{pd.DataFrame}}) \textendash{} dataset with metainformation about run

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{(}}\sphinxstyleliteralstrong{\sphinxupquote{leverage}} \textendash{} 

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{allocation}}\sphinxstyleliteralstrong{\sphinxupquote{)}} (\sphinxstyleliteralemphasis{\sphinxupquote{asset}}) \textendash{} 

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{figure\_path}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} output path

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{simulation\_name}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} Type of simulation (bootstrapp or historical)

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}



\chapter{Presentation}
\label{\detokenize{paper:presentation}}\label{\detokenize{paper:paper}}\label{\detokenize{paper::doc}}
\sphinxAtStartPar
Purpose of the different files:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{research\_pres\_30min.tex}} contains the presentation of the paper.

\end{itemize}


\chapter{References}
\label{\detokenize{references:references}}\label{\detokenize{references:id1}}\label{\detokenize{references::doc}}\phantomsection\label{\detokenize{references:id2}}

\renewcommand{\indexname}{Python Module Index}
\begin{sphinxtheindex}
\let\bigletter\sphinxstyleindexlettergroup
\bigletter{d}
\item\relax\sphinxstyleindexentry{src.download\_data.task\_descriptive\_analysis}\sphinxstyleindexpageref{download_data:\detokenize{module-src.download_data.task_descriptive_analysis}}
\item\relax\sphinxstyleindexentry{src.download\_data.task\_get\_exchange\_rate\_data}\sphinxstyleindexpageref{download_data:\detokenize{module-src.download_data.task_get_exchange_rate_data}}
\indexspace
\bigletter{f}
\item\relax\sphinxstyleindexentry{src.financial\_contracts.swap\_contract}\sphinxstyleindexpageref{financial_contracts:\detokenize{module-src.financial_contracts.swap_contract}}
\item\relax\sphinxstyleindexentry{src.financial\_contracts.test\_swap\_contract}\sphinxstyleindexpageref{financial_contracts:\detokenize{module-src.financial_contracts.test_swap_contract}}
\indexspace
\bigletter{s}
\item\relax\sphinxstyleindexentry{src.simulation.task\_exchange\_rate\_change}\sphinxstyleindexpageref{simulation:\detokenize{module-src.simulation.task_exchange_rate_change}}
\item\relax\sphinxstyleindexentry{src.simulation.task\_simulate\_sample}\sphinxstyleindexpageref{simulation:\detokenize{module-src.simulation.task_simulate_sample}}
\item\relax\sphinxstyleindexentry{src.simulation\_analysis.task\_swap\_payout}\sphinxstyleindexpageref{simulation_analysis:\detokenize{module-src.simulation_analysis.task_swap_payout}}
\item\relax\sphinxstyleindexentry{src.simulation\_analysis.task\_swap\_payout\_analysis}\sphinxstyleindexpageref{simulation_analysis:\detokenize{module-src.simulation_analysis.task_swap_payout_analysis}}
\item\relax\sphinxstyleindexentry{src.simulation\_analysis.utility}\sphinxstyleindexpageref{simulation_analysis:\detokenize{module-src.simulation_analysis.utility}}
\end{sphinxtheindex}

\renewcommand{\indexname}{Index}
\printindex
\end{document}